<div class="thread">
    <button class="primary-button" disabled="@IsStartDisabled" @onclick="Start">Start</button>
    <div class="thread-track-container">
        <div class="lorry-track">
            <div class="lorry @(IsLorryActive ? "active" : "")" style="left: @($"{LorryProgress}%");">
                <div class="lorry-smoke-container">
                    <div class="lorry-smoke">~</div>
                </div>
                <!-- SVG lorry -->
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <!--<text class="lorry-smoke" x="-2" y="20" text-anchor="middle" font-size="12" font-weight="bold" fill="gray">~</text>-->
                    <path d="M21.47,11.185l-1.03-1.43a2.5,2.5,0,0,0-2.03-1.05H14.03V6.565a2.5,2.5,0,0,0-2.5-2.5H4.56a2.507,2.507,0,0,0-2.5,2.5v9.94a1.5,1.5,0,0,0,1.5,1.5H4.78a2.242,2.242,0,0,0,4.44,0h5.56a2.242,2.242,0,0,0,4.44,0h1.22a1.5,1.5,0,0,0,1.5-1.5v-3.87A2.508,2.508,0,0,0,21.47,11.185ZM7,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,7,18.935Zm6.03-1.93H9.15a2.257,2.257,0,0,0-4.3,0H3.56a.5.5,0,0,1-.5-.5V6.565a1.5,1.5,0,0,1,1.5-1.5h6.97a1.5,1.5,0,0,1,1.5,1.5ZM17,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,17,18.935Zm3.94-2.43a.5.5,0,0,1-.5.5H19.15a2.257,2.257,0,0,0-4.3,0h-.82v-7.3h4.38a1.516,1.516,0,0,1,1.22.63l1.03,1.43a1.527,1.527,0,0,1,.28.87Z"/>
                    <path d="M18.029,12.205h-2a.5.5,0,0,1,0-1h2a.5.5,0,0,1,0,1Z"/>
                    <text x="8" y="14.5" text-anchor="middle" font-size="12" font-weight="bold" fill="#000">@(RequestIndex)</text>
                </svg>
            </div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" style="width: @ProgressPrc%"></div>
            <span class="progress-status">@ProgressStatusDescription</span>
        </div>
    </div>
    <div class="result-box">
        
        @if (ResultBox.HasValue)
        {
            if (ResultBox == RequestIndex)
            {
                <div class="lorry active">
                    <!-- SVG lorry -->
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.47,11.185l-1.03-1.43a2.5,2.5,0,0,0-2.03-1.05H14.03V6.565a2.5,2.5,0,0,0-2.5-2.5H4.56a2.507,2.507,0,0,0-2.5,2.5v9.94a1.5,1.5,0,0,0,1.5,1.5H4.78a2.242,2.242,0,0,0,4.44,0h5.56a2.242,2.242,0,0,0,4.44,0h1.22a1.5,1.5,0,0,0,1.5-1.5v-3.87A2.508,2.508,0,0,0,21.47,11.185ZM7,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,7,18.935Zm6.03-1.93H9.15a2.257,2.257,0,0,0-4.3,0H3.56a.5.5,0,0,1-.5-.5V6.565a1.5,1.5,0,0,1,1.5-1.5h6.97a1.5,1.5,0,0,1,1.5,1.5ZM17,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,17,18.935Zm3.94-2.43a.5.5,0,0,1-.5.5H19.15a2.257,2.257,0,0,0-4.3,0h-.82v-7.3h4.38a1.516,1.516,0,0,1,1.22.63l1.03,1.43a1.527,1.527,0,0,1,.28.87Z"/>
                        <path d="M18.029,12.205h-2a.5.5,0,0,1,0-1h2a.5.5,0,0,1,0,1Z"/>
                        <text x="8" y="14.5" text-anchor="middle" font-size="12" font-weight="bold" fill="#000">@(ResultBox)</text>
                    </svg>
                </div>
            }
            else
            {
                @(ResultBox)<span class="overridden">(@(RequestIndex))</span>
            }
        }
    </div>
    @if (IsClearCancelVisible)
    {
        <button class="primary-button" @onclick="ClearCancel" disabled="@IsClearCancelDisabled">@(!IsCancelable ? "Clear" : "Cancel")</button>
    }
</div>
